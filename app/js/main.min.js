$(function(){var t,e=$(".block"),a=$(".table-of-contents"),i=$(".table-of-contents ul");a.offset().top;String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},e.each(function(){var t=$(this)[0].id,e=t.replace(/_/g," ").capitalize();i.append("<li><a href='#"+t+"'>"+e+"</a></li>")});var o=i.find("a"),n=o.map(function(){var t=$($(this).attr("href"));if(t.length)return t});o.click(function(t){var e=$(this).attr("href"),a="#"===e?0:$(e).offset().top-100;$("html, body").stop().animate({scrollTop:a},1e3)}),$(window).scroll(function(){var e=($("body").scrollTop(),$(this).scrollTop()+423),a=n.map(function(){if($(this).offset().top+423-145<e)return this});a=a[a.length-1];var i=a&&a.length?a[0].id:"";t!==i&&(t=i,o.parent().removeClass("active").end().filter("[href='#"+i+"']").parent().addClass("active"))})});